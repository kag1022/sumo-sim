# Sumo Simulation Game (大相撲部屋経営シミュレーション)

## 1. プロジェクト概要
**「伝統と革新の融合」**をテーマにした、大相撲部屋経営シミュレーションゲームです。
プレイヤーは親方となり、弟子のスカウトから育成、本場所での采配、そして部屋の経営至るまで、相撲部屋の全てを管理します。

### デザインコンセプト: "Sumo Modern Traditional"
UI/UXは、伝統的な相撲の美学と現代的なウェブアプリケーションの利便性を融合させています。
- **色彩**: ベンガラ色 (`#b7282e`) をブランドカラーとし、背景には和紙色 (`#fcf9f2`) を使用。
- **フォント**: 見出しには明朝体 (Serif) を使用して品格を、データ表示にはゴシック体 (Sans) を使用して可読性を確保。
- **メタファー**: 「商家の大福帳」「番付表」「儀式」などの伝統的なモチーフをモダンなUIコンポーネントに落とし込んでいます。

---

## 2. ゲームシステム詳細

### 2.1 ゲームモード
ゲーム開始時に、プレイヤーは自身のプレイスタイルに合わせてモードを選択できます。

| モード名 | 開始資金 | 初期弟子数 | 難易度 | 特徴 |
| :--- | :--- | :--- | :--- | :--- |
| **独立 (Establish)** | ¥3,000,000 | 1名 | Hard | ゼロからの立ち上げ。資金繰りが厳しく、経営手腕が問われる。 |
| **継承 (Inherit)** | ¥15,000,000 | 6名 | Normal | 名門部屋の継承。ある程度の戦力と資金がある状態でスタート。 |

### 2.2 進行サイクル
ゲームは「週単位の育成パート」と「日単位の本場所パート」を交互に繰り返します。

1.  **育成フェーズ (偶数月・場所前)**
    *   **期間**: 数週間
    *   **アクション**: 
        *   **稽古指示**: 四股（体）、鉄砲（技）、申し合い（心・技・体）からメニューを選択。
        *   **特別指導**: 親方の指導力ポイント（TP）を消費し、個別指導を行い能力を大幅アップ。稀に**「秘技」**を習得。
        *   **スカウト**: 新弟子候補を調査し、入門試験（有料）を経て採用。
        *   **経営**: 女将さんの支援レベルアップ、施設の改修。
    *   **ランダムイベント**: 毎週15%の確率で、タニマチの支援や不祥事、季節イベントなどが発生。

2.  **本場所フェーズ (奇数月)**
    *   **期間**: 15日間
    *   **アクション**:
        *   **取組観戦**: 弟子の取組結果を確認。
        *   **結果**: 勝敗により資金（懸賞金など）や評判が変動。
    *   **千秋楽**: 優勝決定後、番付編成会議が行われ、翌場所の番付が決定。引退者には断髪式が行われる。

---

### 2.3 力士 (Wrestler) システム

#### パラメータ
力士は以下のステータスを持ちます。
- **心 (Mind)**: 精神力。プレッシャーへの耐性、長期戦での粘り強さ。
- **技 (Technique)**: 技術。決まり手の多彩さ、相手の崩しやすさ。
- **体 (Body)**: 身体能力。当たり負けしない強さ、スタミナ。
- **素質 (Potential)**: 能力の成長限界値（S〜Eランク）。スカウト時の「検査」で判明。
- **体重・身長**: 当たりの強さや相性に影響。

#### 秘技 (Skills)
特別なトレーニングで習得する特殊能力。取組中に発動し、戦況を覆します。
*   `IronHead` (鉄の額): 常に戦闘力+5%
*   `GiantKiller` (巨漢殺し): 格上・重量級相手に戦闘力+15%
*   `EscapeArtist` (逃げ足): ピンチ時に逆転の技が出やすい
*   他、多数実装

#### 進退・引退
*   **引退相談**: 力士が限界を感じると親方（プレイヤー）に相談を持ちかけます。
    *   **承認**: 引退を受け入れ、断髪式へ。功労金が支払われる。
    *   **説得**: 「まだやれる」と奮起させ、ラストチャンスを与える（失敗時は強制引退）。
*   **断髪式**: 厳かなUIで執り行われる儀式。力士のキャリアを称え、第二の人生へ送り出します。

---

### 2.4 マッチング・勝敗ロジック
*   **スイス式トーナメント**: 近い成績の力士同士が当たりやすいリアルなマッチングシステム。
*   **勝敗判定**: 
    1.  基礎戦闘力（心技体）の比較。
    2.  体重差補正、相性補正。
    3.  **スキル発動判定**によるバフ/デバフ。
    4.  ランダム要素と「現在の調子（Stress等）」の加味。
*   **決まり手**: 勝敗決定時のパラメーター差分に基づき、多彩な決まり手（寄り切り、押し出し、うっちゃり等）が選定されます。

### 2.5 経営・イベントシステム
*   **資金 (Funds)**:
    *   収入: 本場所手当、懸賞金、賞金、タニマチからの寄付、引退時の功労金。
    *   支出: スカウト費用、施設維持費、税金（イベント）。
*   **評判 (Reputation)**:
    *   部屋の格を表す数値。高いほど良いスカウト候補が現れやすく、タニマチイベントが良いものになる。
*   **イベントエンジン**:
    *   汎用イベント（各種ボーナス/ペナルティ）、季節イベント（花見、猛暑）、不祥事（夜遊び）などが動的に発生。
    *   モーダルUIによる没入感のあるイベント演出。

---

## 3. 技術スタック (Tech Stack)

### Frontend
- **Framework**: React 18+ (via Vite)
- **Language**: TypeScript 5.x
- **Styling**: Tailwind CSS (Utility-first CSS)
    - カスタムカラーパレット (`tailwind.config.js`) によるテーマ管理
- **Icons**: Lucide React
- **Animation**: CSS Transitions, Keyframes for modal effects

### State Management
- **React Context API**: 
    - `GameContext`: ゲーム全体の進行状態、資金、日時、アクティブなイベント等を管理。
    - カスタムフック (`useGameLoop`) にビジネスロジックを集約。

### Data Structure
- **Immutability**: 状態更新は基本的にイミュータブルに行い、予測可能な状態遷移を保証。
- **Persistence**: `localStorage` を使用したオートセーブ機能（`SaveData`型）。

---

## 4. ディレクトリ構造

```
src/
├── components/         # 汎用UIコンポーネント (Button, Modal, Card等)
├── context/            # Global State (GameContext)
├── features/           # 機能別モジュール
│   ├── banzuke/        # 番付・履歴ロジック
│   ├── events/         # ランダムイベントシステム
│   ├── game/           # ゲーム初期化・モード設定
│   ├── heya/           # 部屋経営・リソース管理
│   ├── match/          # 取組・勝敗判定・ログ
│   └── wrestler/       # 力士データ・育成・スカウト・引退
├── hooks/              # ゲームループ、イベントハンドリング
├── utils/              # 汎用ユーティリティ (乱数、フォーマット)
└── App.tsx             # エントリーポイント
```

---

## 5. インストール・開発ガイド

### 前提条件
- Node.js (v18以上推奨)
- npm

### 手順
```bash
# クローン
git clone <repository-url>

# ディレクトリ移動
cd sumo-sim

# 依存パッケージのインストール
npm install

# 開発サーバーの起動 (localhost:5173)
npm run dev
```

### ビルド
```bash
npm run build
```

---

## 6. ライセンス
Private Project. All rights reserved.
