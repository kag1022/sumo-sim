# 力士育成シミュレーション『横綱への道（仮）』仕様書

## 1. コンセプト (Concept)
*   **コア**: 650人の力士がひしめく巨大なピラミッドを、一人の弟子と共に駆け上がる。
*   **体験**: 45の相撲部屋がそれぞれ歴史を持ち、ライバルたちが昇進・引退を繰り返す「動く世界」の構築。
*   **継承**: 弟子が引退しても「名跡（親方株）」が成長し、部屋の歴史が次の弟子へ引き継がれるループゲーム。

## 2. データ構造 (The World Model)
「データ」と「振る舞い」を完全に分離し、AIエージェントが理解しやすい疎結合な設計を採用します。

### A. 力士データ (RikishiResource)
*   **基本情報**:
    *   ID (UUID), 四股名 (日本語), 年齢 (15-45), 所属部屋ID, 性格タイプ。
*   **能力値 (0-200)**:
    *   心 (Mental), 技 (Technique), 体 (Strength), 重 (Weight)。
    *   *補足: 瞬発力などは技・体に統合検討、あるいはサブステータス化。*
*   **状態**:
    *   疲労度 (Fatigue), やる気 (Motivation), 怪我フラグ (IsInjured)。
*   **成績**:
    *   直近15場所の勝敗記録, 通算成績, 現在の番付順位 (1〜650位)。

### B. 部屋データ (StableResource)
*   **基本情報**: 部屋名, 親方名, 伝統 (特定のトレーニング効率UP)。
*   **所属メンバー**: 所属している力士のIDリスト。

### C. 番付データ (BanzukeTable)
*   **構造**: 1位から650位までのランキングリスト。
*   **役割**: 順位に基づき「東横綱」「西序ノ口」といった称号を動的に割り当てる。

## 3. ゲームサイクル (Game Loop)

### ① 育成フェーズ (Stable Mode)
*   **期間**: 本場所の間（8週間分）。
*   **コマンド**:
    *   稽古（基礎・応用）, 出稽古, ちゃんこ, 休養, 対話。
*   **ロジック**:
    *   各コマンド実行により `RikishiResource` の数値が変動。
    *   並行して世界中のAI力士も簡易的な成長シミュレーションを行う。

### ② 本場所フェーズ (Tournament Mode)
*   **15日制**: 毎日「取組作成 → 勝敗計算 → 演出 → 記録更新」をループ。
*   **マッチングロジック**: 番付順位が近い者同士を優先的に対戦。
*   **勝敗計算エンジン (BoutEngine)**:
    *   `力士A能力 vs 力士B能力 + 当日の調子 + 相性(型) + 乱数`
*   **演出**:
    *   プレイヤーの取組のみ詳細なテキスト実況・演出を表示。
    *   AI同士は高速一括シミュレーション。

### ③ 番付編成フェーズ (Ranking Update)
*   **全650人の並び替え**:
    *   勝ち越し：順位上昇（勝ち数比例）。
    *   負け越し：順位下降。
*   **昇進**:
    *   横綱・大関への昇進判定（2場所連続優勝など）。

## 4. ライフサイクル (Legacy System)

### A. 引退と名跡
*   弟子が引退すると、実績（最高位、通算勝利数）が「名跡ポイント（Legacy Point）」に変換される。
*   プレイヤーの「名跡ランク」が上がり、次世代弟子の初期能力（素質）が底上げされる。

### B. 世界の更新
*   引退したAI力士を削除。
*   新しい「新弟子」を45部屋のどこかにランダム補充し、常に650人を維持。

## 5. 技術・実装設計 (Architecture)

### シングルトン (Autoload)
*   **GameManager**: 全体の進行（今何週目か、場所中か）を管理。
*   **WorldData**: 45部屋と650人のリソースを保持するデータベース。

### マネージャークラス (Node/Script)
*   **BoutEngine**: 勝敗計算ロジック。
*   **BanzukeOrganized**: ランキング並び替えアルゴリズム。

### UIレイヤー
*   ロジックと信号 (Signal) で通信。
*   **主なUI**:
    *   **巨大番付スクロール**: 650人が並ぶリスト。
    *   **ライバル追跡**: 因縁の相手を強調表示。
    *   **黄金時代イベント**: 特定部屋の隆盛をニュース表示。
